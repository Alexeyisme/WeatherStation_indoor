; PlatformIO Project Configuration File
;
; Weather Station Indoor - ESP32 Environmental Monitoring Station
;
; This project provides indoor environmental monitoring with web interface,
; BLE connectivity for outdoor sensors, and real-time data display.
;
; Updated to use IoT-WebUI v2.0 for enhanced web interface
; with sensor data grids, system status displays, and unified interface management.
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:lilygo-t-display]
platform = espressif32
board = lilygo-t-display
framework = arduino
board_build.partitions = huge_app.csv
monitor_speed = 115200
build_flags = 
    -Os
    -DCORE_DEBUG_LEVEL=0
    -DNDEBUG
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER=1
    -DTFT_SDA_READ=1
    -DTFT_WIDTH=135
    -DTFT_HEIGHT=240
    -DCGRAM_OFFSET=1
    -DTFT_MISO=-1
    -DTFT_MOSI=19
    -DTFT_SCLK=18
    -DTFT_CS=5
    -DTFT_DC=16
    -DTFT_RST=23
    -DTFT_BL=4
    -DTFT_BACKLIGHT_ON=1
    -DLOAD_GLCD=1
    -DLOAD_FONT2=1
    -DLOAD_FONT4=1
    -DLOAD_FONT6=1
    -DLOAD_FONT7=1
    -DLOAD_FONT8=1
    -DLOAD_GFXFF=1
    -DSMOOTH_FONT=1
    -DSPI_FREQUENCY=40000000
    ; NimBLE size reductions
    -DCONFIG_BT_NIMBLE_MESH=0
    -DCONFIG_BT_NIMBLE_ROLE_CENTRAL=0
    -DCONFIG_BT_NIMBLE_ROLE_OBSERVER=0
    -DCONFIG_BT_NIMBLE_ROLE_BROADCASTER=0
    -DCONFIG_BT_NIMBLE_ROLE_PERIPHERAL=1
    -DCONFIG_BT_NIMBLE_EXT_ADV=0
    -DCONFIG_BT_NIMBLE_MAX_EXT_ADV_INSTANCES=0
    -DCONFIG_BT_NIMBLE_MAX_CONNECTIONS=1
    -DCONFIG_BT_NIMBLE_MAX_BONDS=1
    -DCONFIG_BT_NIMBLE_ATT_PREFERRED_MTU=23
    -DCONFIG_BT_NIMBLE_L2CAP_COC_MAX_NUM=0
    -DCONFIG_BT_NIMBLE_SM_LEGACY=0
    -DCONFIG_BT_NIMBLE_SM_SC=0
    -DNIMBLE_CPP_LOG_LEVEL=0
    ; SDWI: use default theme for correct button visibility
    -DIOT_WEBUI_ENABLE_THEME=1
lib_deps = 
	; Enhanced generic web interface library (GitHub repository)
	https://github.com/Alexeyisme/IoT-WebUI.git
	; BLE connectivity for outdoor sensor communication
	h2zero/NimBLE-Arduino@^1.4.1
	; TFT display driver for LilyGo T-Display
	bodmer/TFT_eSPI@^2.5.43
	; Time synchronization and timezone support
	ropg/ezTime@^0.8.3
	; JSON handling for web interface and sensor data
	bblanchon/ArduinoJson@^7.0.3
	; WiFi configuration with captive portal
	tzapu/WiFiManager@^2.0.16-rc.1
